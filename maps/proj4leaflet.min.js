var navControl = L.Control.extend({
	onAdd: function(map) {
		var container = L.DomUtil.create('div', 'leaflet-control-custom leaflet-bar');
		container.style.background = 'white';
			
		var icon = L.DomUtil.create('a', 'leaflet-control-layers-nav', container);
		icon.style.backgroundImage = "url(images/sailboat.png)"
		icon.style.width = "100%"
		icon.style.backgroundSize = "100% 100%"
		var container2 = L.DomUtil.create('div', '', container);
		container2.style.visibility= "hidden"
		
		var name = L.DomUtil.create('a', '', container2);
		name.innerText = "Pomorske karte"
		name.style.width = "100%"
		
		var navmapOverlay;
		var navmap_lnk=[
			[' ',''],
			['Male-karte_trzaski-zaliv',[45.816907, 13.403440], [45.379593, 13.836919]],
			['1-Trsk Koper Piran',[45.821759, 13.371311], [45.364574, 13.849563]],
			['2-Umag Rovinj',[45.471161, 13.306700], [45.006223, 13.785065]],
			['3-Rovinj Pula',[45.099171, 13.499902], [44.640285, 13.976953]],
			['4-Kvarner Unje',[45.100770,13.852938], [44.641589, 14.331229]],
			['5-Rijeka Cres Krk',[45.374161, 14.133656], [45.055021, 14.813221]],		
			['6-Cres Krk',[45.100589, 14.194038], [44.640908, 14.674448]]
		]
		var createBreak = L.DomUtil.create('br', null, container2);
		var navmap_sel = L.DomUtil.create('select', 'leaflet-control-custom button selector', container2);
		navmap_sel.style.width = "100%";
		navmap_lnk.forEach(function (l) {
		
			var navmap_options = L.DomUtil.create('option', '', navmap_sel);
			navmap_options.text = l[0]
			navmap_sel.add(navmap_options)
			//if (l[0]=='veter') navmap_options.setAttribute('selected', true);
			});
		navmap_sel.style.float = "right";
		navmap_sel.onchange = function() {
			if (document.getElementsByClassName("selector")[0].selectedIndex==0) {map.removeLayer(navmapOverlay);}
			else
			{
				if (navmapOverlay!=null){map.removeLayer(navmapOverlay);}
				var imageUrl = 'nav/'+navmap_lnk[document.getElementsByClassName("selector")[0].selectedIndex][0]+'.jpg' 
				imageBounds = [navmap_lnk[document.getElementsByClassName("selector")[0].selectedIndex][1],navmap_lnk[document.getElementsByClassName("selector")[0].selectedIndex][2]];
				navmapOverlay=L.imageOverlay(imageUrl, imageBounds, {opacity: 0.65}).addTo(map);
				
				map.setView(map.getCenter(), 10);
			}
		};
		
        L.DomEvent.on(container, 'mouseover', function(e) {
          L.DomEvent.stopPropagation(e); // Prevent map click events
          container.classList.add('expanded'); // Toggle the 'expanded' class
		  icon.style.visibility = "hidden"
		  container2.style.visibility = "visible"
        });
        L.DomEvent.on(container, 'mouseout', function(e) {
          L.DomEvent.stopPropagation(e); // Prevent map click events
		  icon.style.visibility="visible"
		  container2.style.visibility= "hidden"
          container.classList.remove('expanded'); // Toggle the 'expanded' class
        });

        // Prevent map events when interacting with the control
        L.DomEvent.disableClickPropagation(container);
		return container;
		
	}
        });
